
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>微前端 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="readme.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../share/2021/2021.html">
            
                <a href="../share/2021/2021.html">
            
                    
                    2021 年分享会
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../specification/readme.html">
            
                <a href="../specification/readme.html">
            
                    
                    前端规范文档
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../javascript-base/readme.html">
            
                <a href="../javascript-base/readme.html">
            
                    
                    js 基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../computer_networking/readme.html">
            
                <a href="../computer_networking/readme.html">
            
                    
                    计算机网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../computer_networking/HTTP.html">
            
                <a href="../computer_networking/HTTP.html">
            
                    
                    HTTP
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../h5/readme.html">
            
                <a href="../h5/readme.html">
            
                    
                    h5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../react/readme.html">
            
                <a href="../react/readme.html">
            
                    
                    react
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../vue/readme.html">
            
                <a href="../vue/readme.html">
            
                    
                    vue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../miniapp/readme.html">
            
                <a href="../miniapp/readme.html">
            
                    
                    微信小程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../nodejs/readme.html">
            
                <a href="../nodejs/readme.html">
            
                    
                    nodejs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../dart/readme.html">
            
                <a href="../dart/readme.html">
            
                    
                    dart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../flutter/readme.html">
            
                <a href="../flutter/readme.html">
            
                    
                    flutter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="readme.html">
            
                <a href="readme.html">
            
                    
                    工程化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.13.1" data-path="micro_frontend.html">
            
                <a href="micro_frontend.html">
            
                    
                    微前端
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >微前端</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <!--
 * @Author: 明华
 * @Date: 2021-01-28 15:35:01
 * @LastEditors: 明华
 * @LastEditTime: 2021-02-05 05:57:47
 * @Description: 
 * @FilePath: /frontend-training/engineering/micro_frontend.md
-->
<h1 id="&#x5FAE;&#x524D;&#x7AEF;">&#x5FAE;&#x524D;&#x7AEF;</h1>
<p>&#x6700;&#x65E9;&#x63D0;&#x51FA;&#x7684;&#x5FAE;&#x524D;&#x7AEF;   =&gt;  &#x89E3;&#x6784;&#x5DE8;&#x77F3;&#x9879;&#x76EE;&#xFF0C;&#x6280;&#x672F;&#x6808;&#x65E0;&#x5173;</p>
<p>&#x5148;&#x770B;&#x770B;&#x4E1A;&#x5185;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;</p>
<p>&#x5DE8;&#x77F3;&#x9879;&#x76EE;&#x5E9E;&#x5927;&#x96BE;&#x7EF4;&#x62A4;</p>
<p>&#x5C0F;&#x9879;&#x76EE;&#x592A;&#x5206;&#x6563;, &#x9700;&#x8981;&#x6574;&#x5408;</p>
<p>&#x56E2;&#x961F;&#x65E0;&#x6CD5;&#x540C;&#x65F6;&#x5BB9;&#x7EB3;&#x4E0D;&#x540C;&#x6280;&#x672F;&#x6808;</p>
<p>&#x67D0;&#x4E9B;&#x677F;&#x5757;&#x53CA;&#x4E1A;&#x52A1;&#x9700;&#x8981;&#x516C;&#x7528;</p>
<p>&#x4E1A;&#x5185;&#x76F8;&#x5BF9;&#x6210;&#x719F;&#x7684;&#x65B9;&#x6848;</p>
<h2 id="&#x8682;&#x8681;&#x91D1;&#x670D;">&#x8682;&#x8681;&#x91D1;&#x670D;</h2>
<p>@Umi-plugin-qiankun</p>
<p>qiankun</p>
<p>single-spa&#xFF08;<a href="https://zh-hans.single-spa.js.org/docs/getting-started-overview#javascript-%E5%BE%AE%E5%89%8D%E7%AB%AF&#xFF09;" target="_blank">https://zh-hans.single-spa.js.org/docs/getting-started-overview#javascript-%E5%BE%AE%E5%89%8D%E7%AB%AF&#xFF09;</a></p>
<p>Single-spa &#x4ECE;&#x73B0;&#x4EE3;&#x6846;&#x67B6;&#x7EC4;&#x4EF6;&#x751F;&#x547D;&#x5468;&#x671F;&#x4E2D;&#x83B7;&#x5F97;&#x7075;&#x611F;&#xFF0C;&#x5C06;&#x751F;&#x547D;&#x5468;&#x671F;&#x5E94;&#x7528;&#x4E8E;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;</p>
<pre><code class="lang-js"><span class="hljs-comment">//app1.js</span>

<span class="hljs-keyword">let</span> domEl;

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bootstrap</span>(<span class="hljs-params">props</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>
        .resolve()
        .then(() =&gt; {
            domEl = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&apos;div&apos;</span>);
            domEl.id = <span class="hljs-string">&apos;app1&apos;</span>;
            <span class="hljs-built_in">document</span>.body.appendChild(domEl);
        });
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mount</span>(<span class="hljs-params">props</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>
        .resolve()
        .then(() =&gt; {
            <span class="hljs-comment">// &#x5728;&#x8FD9;&#x91CC;&#x901A;&#x5E38;&#x4F7F;&#x7528;&#x6846;&#x67B6;&#x5C06;ui&#x7EC4;&#x4EF6;&#x6302;&#x8F7D;&#x5230;dom&#x3002;&#x8BF7;&#x53C2;&#x9605;https://single-spa.js.org/docs/ecosystem.html&#x3002;</span>
            domEl.textContent = <span class="hljs-string">&apos;App 1 is mounted!&apos;</span>
        });
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unmount</span>(<span class="hljs-params">props</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>
        .resolve()
        .then(() =&gt; {
            <span class="hljs-comment">// &#x5728;&#x8FD9;&#x91CC;&#x901A;&#x5E38;&#x662F;&#x901A;&#x77E5;&#x6846;&#x67B6;&#x628A;ui&#x7EC4;&#x4EF6;&#x4ECE;dom&#x4E2D;&#x5378;&#x8F7D;&#x3002;&#x53C2;&#x89C1;https://single-spa.js.org/docs/ecosystem.html</span>
            domEl.textContent = <span class="hljs-string">&apos;&apos;</span>;
        })
}
</code></pre>
<h2 id="&#x6B22;&#x805A;&#x65F6;&#x4EE3;">&#x6B22;&#x805A;&#x65F6;&#x4EE3;</h2>
<p>Emp&#xFF08;<a href="https://github.com/efoxTeam/emp/wiki&#xFF09;" target="_blank">https://github.com/efoxTeam/emp/wiki&#xFF09;</a>    </p>
<p>webpack5 &#x6A21;&#x5757;&#x8054;&#x90A6; (<a href="https://zhuanlan.zhihu.com/p/115403616" target="_blank">https://zhuanlan.zhihu.com/p/115403616</a>)</p>
<p>Single-spa&#x539F;&#x7406;    demo&#x6F14;&#x793A;</p>
<p>jsEntry |HtmlEntry    <a href="https://juejin.cn/post/6885212507837825038" target="_blank">https://juejin.cn/post/6885212507837825038</a></p>
<p>import-html-entry</p>
<h3 id="webpack5&#x6A21;&#x5757;&#x8054;&#x90A6;">webpack5&#x6A21;&#x5757;&#x8054;&#x90A6;</h3>
<ol>
<li><p>&#x52A8;&#x673A;</p>
<!-- ![image-20210128013957792](/Users/hulipeng/Library/Application Support/typora-user-images/image-20210128013957792.png) -->
</li>
<li><p>&#x5C5E;&#x6027;</p>
</li>
</ol>
<!-- ![image-20210128013810997](/Users/hulipeng/Library/Application Support/typora-user-images/image-20210128013810997.png) -->
<h2 id="&#x89C4;&#x5212;">&#x89C4;&#x5212;</h2>
<p>&#x524D;&#x7AEF;&#x5E94;&#x7528;&#x4E2D;&#x5FC3;&#x670D;&#x52A1;        &#x5728;&#x7EBF;&#x52A8;&#x6001;&#x5206;&#x53D1; Runtime &#x5B50;&#x6A21;&#x5757; (&#x8BA2;&#x5355;&#x7BA1;&#x7406;,  &#x5546;&#x54C1;&#x7BA1;&#x7406;, &#x56FE;&#x7247;&#x7BA1;&#x7406;&#xFF0C;....&#xFF09;</p>
<p>&#x4E1A;&#x52A1;&#x4E2D;&#x53F0;    &#x73B0;&#x5728;&#x7684;    b-test.hanguangbaihuo.com</p>
<p>&#x5B50;&#x9879;&#x76EE;1&#xFF1A; mqkf.com &#x9EBB;&#x96C0;&#x5BA2;&#x670D;&#xFF08;&#x8BA2;&#x5355;&#x7BA1;&#x7406;&#xFF0C;&#x56FE;&#x7247;&#x7BA1;&#x7406;&#xFF09;</p>
<p>&#x5B50;&#x9879;&#x76EE;2&#xFF1A; mqyy.com &#x9EBB;&#x96C0;&#x8FD0;&#x8425;&#xFF08;&#x5546;&#x54C1;&#x7BA1;&#x7406;&#xFF0C; &#x56FE;&#x7247;&#x7BA1;&#x7406;&#xFF09;</p>
<p>&#x5B50;&#x9879;&#x76EE;3&#xFF1A; mqyw.com &#x9EBB;&#x96C0;&#x8FD0;&#x7EF4;&#xFF08;&#x6269;&#x5BB9;&#x7BA1;&#x7406;&#xFF0C; &#x63A8;&#x9001;&#x7BA1;&#x7406;&#xFF09;</p>
<p>.......</p>
<p>.......</p>
<p>.......</p>
<p>&#x5047;&#x5982;&#x6709;20&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x56E2;&#x961F;&#xFF0C;&#x9700;&#x8981;&#x6709;20&#x79CD;&#x5B50;&#x9879;&#x76EE;&#x5F62;&#x6001;</p>
<p>&#x914D;&#x7F6E;&#x5316;&#x4E2D;&#x5FC3;&#x4E00;&#x952E;&#x53D1;&#x5E03;&#x65B0;&#x7684;&#x5B50;&#x9879;&#x76EE;(&#x9700;&#x8981;&#x5E94;&#x7528;&#x4E2D;&#x5FC3;&#x7C92;&#x5EA6;&#x8DB3;&#x591F;&#x7EC6;)</p>
<p><a href="https://my.oschina.net/u/568478/blog/4795185" target="_blank">https://my.oschina.net/u/568478/blog/4795185</a></p>
<h1 id="&#x4EE3;&#x7801;&#x7247;&#x6BB5;">&#x4EE3;&#x7801;&#x7247;&#x6BB5;</h1>
<pre><code class="lang-js"><span class="hljs-comment">// single-spa&#x7F3A;&#x9677;</span>
<span class="hljs-comment">// &#x4E0D;&#x591F;&#x7075;&#x6D3B;&#xFF0C;&#x4E0D;&#x80FD;&#x52A8;&#x6001;&#x52A0;&#x8F7D;js&#x6587;&#x4EF6;</span>
<span class="hljs-comment">// &#x6837;&#x5F0F;&#x4E0D;&#x9694;&#x79BB; &#x6CA1;&#x6709;js&#x6C99;&#x7BB1;&#x7684;&#x673A;&#x5236; window&#x6C61;&#x67D3;</span>
</code></pre>
<h2 id="child-vue">child-vue</h2>
<pre><code class="lang-shell">npm install single-spa-vue
</code></pre>
<h3 id="srcmainjs">src/main.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;vue&apos;</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./App.vue&apos;</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./router&apos;</span>
<span class="hljs-keyword">import</span> singleSpaVue <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;single-spa-vue&apos;</span>

Vue.config.productionTip = <span class="hljs-literal">false</span>

<span class="hljs-comment">// new Vue({</span>
<span class="hljs-comment">//   router,</span>
<span class="hljs-comment">//   render: h =&gt; h(App)</span>
<span class="hljs-comment">// }).$mount(&apos;#app&apos;)</span>

<span class="hljs-keyword">const</span> appOptions = {
  el: <span class="hljs-string">&apos;#vue&apos;</span>,
  router,
  render: h =&gt; h(App)
}

<span class="hljs-keyword">const</span> vueLifeCycle = singleSpaVue({
  Vue,
  appOptions,
})

<span class="hljs-comment">// &#x5982;&#x679C;&#x662F;&#x7236;&#x5E94;&#x7528;&#x5F15;&#x7528;&#x6211;</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.singleSpaNavigate) {
  __webpack_public_path__ = <span class="hljs-string">&apos;http://localhost:10000/&apos;</span>
}

<span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>.singleSpaNavigate) {
  <span class="hljs-keyword">delete</span> appOptions.el
  <span class="hljs-keyword">new</span> Vue(appOptions).$mount(<span class="hljs-string">&apos;#app&apos;</span>)
}


<span class="hljs-comment">// &#x534F;&#x8BAE;&#x63A5;&#x5165; &#x7236;&#x5E94;&#x7528;&#x4F1A;&#x8C03;&#x7528;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> bootstrap = vueLifeCycle.bootstrap
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> mount = vueLifeCycle.mount
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> unmount = vueLifeCycle.unmount

<span class="hljs-comment">// &#x5C06;&#x5B50;&#x5E94;&#x7528;&#x6253;&#x5305;&#x6210;&#x4E00;&#x4E2A;&#x4E2A;&#x7684;lib&#x53BB;&#x7ED9;&#x7236;&#x5E94;&#x7528;&#x4F7F;&#x7528;</span>
</code></pre>
<h3 id="srcrouterindexjs">src/router/index.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> VueRouter({
  mode: <span class="hljs-string">&apos;history&apos;</span>,
  base: <span class="hljs-string">&apos;/vue&apos;</span>,
  <span class="hljs-comment">// base: process.env.BASE_URL,</span>
  routes
})
</code></pre>
<h3 id="vueconfigjs">vue.config.js</h3>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
  configureWebpack: {
    output: {
      library: <span class="hljs-string">&apos;singleVue&apos;</span>,
      libraryTarget: <span class="hljs-string">&apos;umd&apos;</span>
    },
    devServer: {
      port: <span class="hljs-number">10000</span>,
    }
  }
}
</code></pre>
<h2 id="parent-vue">parent-vue</h2>
<pre><code class="lang-shell">npm install single-spa
</code></pre>
<h3 id="srcmainjs">src/main.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;vue&apos;</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./App.vue&apos;</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./router&apos;</span>

<span class="hljs-keyword">import</span> { registerApplication, start } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;single-spa&apos;</span>

Vue.config.productionTip = <span class="hljs-literal">false</span>

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadScript</span>(<span class="hljs-params">url</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>((resolve, reject) =&gt; {
    <span class="hljs-keyword">let</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&apos;script&apos;</span>)
    script.src = url
    script.onload = resolve
    script.onerror = reject
    <span class="hljs-built_in">document</span>.head.appendChild(script)
  })
}

<span class="hljs-comment">// single-spa&#x7F3A;&#x9677;</span>
<span class="hljs-comment">// &#x4E0D;&#x591F;&#x7075;&#x6D3B;&#xFF0C;&#x4E0D;&#x80FD;&#x52A8;&#x6001;&#x52A0;&#x8F7D;js&#x6587;&#x4EF6;</span>
<span class="hljs-comment">// &#x6837;&#x5F0F;&#x4E0D;&#x9694;&#x79BB; &#x6CA1;&#x6709;js&#x6C99;&#x7BB1;&#x7684;&#x673A;&#x5236; window&#x6C61;&#x67D3;</span>

registerApplication(<span class="hljs-string">&apos;myVueApp&apos;</span>,
  <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// &#x52A0;&#x8F7D;&#x6A21;&#x5757;</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&apos;</span>);
    <span class="hljs-keyword">await</span> loadScript(<span class="hljs-string">`http://localhost:10000/js/chunk-vendors.js`</span>)
    <span class="hljs-keyword">await</span> loadScript(<span class="hljs-string">`http://localhost:10000/js/app.js`</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.singleVue
  },
  location =&gt; location.pathname.startsWith(<span class="hljs-string">&apos;/vue&apos;</span>) <span class="hljs-comment">// &#x7528;&#x6237;&#x5207;&#x6362;&#x5230;&#x4E86;vue&#x7684;&#x8DEF;&#x5F84;&#x4E0B;</span>
)

start()

<span class="hljs-keyword">new</span> Vue({
  router,
  render: h =&gt; h(App)
}).$mount(<span class="hljs-string">&apos;#app&apos;</span>)
</code></pre>
<h3 id="srcappvue">src/App.vue</h3>
<pre><code class="lang-vue">&lt;template&gt;
  &lt;div id=&quot;app&quot;&gt;
    &lt;router-link to=&quot;/vue&quot;&gt;&#x52A0;&#x8F7D;vue&#x5B50;&#x5E94;&#x7528;&lt;/router-link&gt;
    &lt;!-- &#x5B50;&#x5E94;&#x7528;&#x5BB9;&#x5668; --&gt;
    &lt;div id=&quot;vue&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style&gt;
&lt;/style&gt;
</code></pre>
<h2 id="qiankun-base">qiankun-base</h2>
<pre><code class="lang-shell">npm i element-ui -S
npm install qiankun
</code></pre>
<h3 id="srcmainjs">Src/main.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;vue&apos;</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./App.vue&apos;</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./router&apos;</span>
<span class="hljs-keyword">import</span> ElementUI <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;element-ui&apos;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&apos;element-ui/lib/theme-chalk/index.css&apos;</span>;

Vue.use(ElementUI);

<span class="hljs-keyword">import</span> { registerMicroApps, start } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;qiankun&apos;</span>
<span class="hljs-keyword">const</span> apps = [
  {
    name: <span class="hljs-string">&apos;vueApp&apos;</span>,
    entry: <span class="hljs-string">&apos;//localhost:10000&apos;</span>, <span class="hljs-comment">//&#x9ED8;&#x8BA4;&#x52A0;&#x8F7D;&#x8FD9;&#x4E2A;html&#xFF0C;&#x89E3;&#x6790;&#x91CC;&#x9762;&#x7684;js&#xFF0C;&#x52A8;&#x6001;&#x6267;&#x884C;&#xFF08;&#x5B50;&#x5E94;&#x7528;&#x5FC5;&#x987B;&#x652F;&#x6301;&#x8DE8;&#x57DF;&#xFF09;</span>
    container: <span class="hljs-string">&apos;#vue&apos;</span>,
    activeRule: <span class="hljs-string">&apos;/vue&apos;</span>,
  },
  {
    name: <span class="hljs-string">&apos;reactApp&apos;</span>,
    entry: <span class="hljs-string">&apos;//localhost:20000&apos;</span>, <span class="hljs-comment">//&#x9ED8;&#x8BA4;&#x52A0;&#x8F7D;&#x8FD9;&#x4E2A;html&#xFF0C;&#x89E3;&#x6790;&#x91CC;&#x9762;&#x7684;js&#xFF0C;&#x52A8;&#x6001;&#x6267;&#x884C;&#xFF08;&#x5B50;&#x5E94;&#x7528;&#x5FC5;&#x987B;&#x652F;&#x6301;&#x8DE8;&#x57DF;&#xFF09;</span>
    container: <span class="hljs-string">&apos;#react&apos;</span>,
    activeRule: <span class="hljs-string">&apos;/react&apos;</span>,
  }
]

registerMicroApps(apps)
start({
  prefetch: <span class="hljs-literal">false</span>,
})

<span class="hljs-keyword">new</span> Vue({
  router,
  render: h =&gt; h(App)
}).$mount(<span class="hljs-string">&apos;#app&apos;</span>)
</code></pre>
<h3 id="srcappvue">src/App.vue</h3>
<pre><code class="lang-vue">&lt;template&gt;
  &lt;div&gt;
    &lt;el-menu :router=&quot;true&quot; mode=&quot;horizontal&quot;&gt;
      &lt;!-- &#x57FA;&#x5EA7;&#x4E2D;&#x53EF;&#x4EE5;&#x653E;&#x81EA;&#x5DF1;&#x7684;&#x8DEF;&#x7531; --&gt;
      &lt;el-menu-item index=&quot;/&quot;&gt;Home&lt;/el-menu-item&gt;
      &lt;!-- &#x53EF;&#x4EE5;&#x5F15;&#x7528;&#x5176;&#x4ED6;&#x5B50;&#x5E94;&#x7528; --&gt;
      &lt;el-menu-item index=&quot;/vue&quot;&gt;vue&#x5E94;&#x7528;&lt;/el-menu-item&gt;
      &lt;el-menu-item index=&quot;/react&quot;&gt;react&#x5E94;&#x7528;&lt;/el-menu-item&gt;
    &lt;/el-menu&gt;
    &lt;router-view&gt;&lt;/router-view&gt;
    &lt;div id=&quot;vue&quot;&gt;&lt;/div&gt;
    &lt;div id=&quot;react&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 id="srcviewshomevue">Src/views/Home.vue</h3>
<pre><code class="lang-js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home&quot;</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- &lt;img alt=&quot;Vue logo&quot; src=&quot;../assets/logo.png&quot;&gt;
    &lt;HelloWorld msg=&quot;Welcome to Your Vue.js App&quot;/&gt; --&gt;</span>
    base&#x4E3B;&#x9875;
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// @ is an alias to /src</span>
<span class="hljs-comment">// import HelloWorld from &apos;@/components/HelloWorld.vue&apos;</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  name: <span class="hljs-string">&apos;Home&apos;</span>,
  <span class="hljs-comment">// components: {</span>
  <span class="hljs-comment">//   HelloWorld</span>
  <span class="hljs-comment">// }</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<h2 id="qiankun-vue">qiankun-vue</h2>
<h3 id="vueconfigjs">vue.config.js</h3>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
  configureWebpack: {
    output: {
      library: <span class="hljs-string">&apos;vueApp&apos;</span>,
      libraryTarget: <span class="hljs-string">&apos;umd&apos;</span>
    },
    devServer: {
      port: <span class="hljs-number">10000</span>,
      headers: {
        <span class="hljs-string">&apos;Access-Control-Allow-Origin&apos;</span>: <span class="hljs-string">&apos;*&apos;</span>,
      }
    }
  }
}
</code></pre>
<h3 id="srcmainjs">src/main.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;vue&apos;</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./App.vue&apos;</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./router&apos;</span>

<span class="hljs-comment">// Vue.config.productionTip = false</span>

<span class="hljs-comment">// new Vue({</span>
<span class="hljs-comment">//   router,</span>
<span class="hljs-comment">//   render: h =&gt; h(App)</span>
<span class="hljs-comment">// }).$mount(&apos;#app&apos;)</span>

<span class="hljs-keyword">let</span> instance = <span class="hljs-literal">null</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params">props</span>) </span>{
  instance = <span class="hljs-keyword">new</span> Vue({
    router,
    render: h =&gt; h(App)
  }).$mount(<span class="hljs-string">&apos;#app&apos;</span>) <span class="hljs-comment">// &#x8FD9;&#x91CC;&#x662F;&#x6302;&#x8F7D;&#x5230;&#x81EA;&#x5DF1;&#x7684;html&#x4E2D;&#xFF0C;&#x57FA;&#x5EA7;&#x4F1A;&#x62FF;&#x5230;&#x8FD9;&#x4E2A;&#x6302;&#x8F7D;&#x540E;&#x7684;html&#xFF0C;&#x5C06;&#x5176;&#x63D2;&#x5165;&#x8FDB;&#x53BB;</span>
}



<span class="hljs-keyword">if</span>(<span class="hljs-built_in">window</span>.__POWERED_BY_QIANKUN__) {
  __webpack_public_path__ = <span class="hljs-built_in">window</span>.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;
}

<span class="hljs-keyword">if</span>(!<span class="hljs-built_in">window</span>.__POWERED_BY_QIANKUN__) {
  render()
}

<span class="hljs-comment">// &#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x534F;&#x8BAE;</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bootstrap</span>(<span class="hljs-params">props</span>)</span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;qiankun-vue&#x542F;&#x52A8;&apos;</span>);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mount</span>(<span class="hljs-params">props</span>)</span>{
  render(props)
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unmount</span>(<span class="hljs-params">props</span>)</span>{
  instance.$destroy()
}
</code></pre>
<h3 id="srcrouterindexjs">src/router/index.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> VueRouter({
  mode: <span class="hljs-string">&apos;history&apos;</span>,
  base: <span class="hljs-string">&apos;/vue&apos;</span>,
  routes
})
</code></pre>
<h2 id="qiankun-react">qiankun-react</h2>
<pre><code class="lang-shell">npx create-react-app qiankun-react
yarn add react-app-rewired
yarn add react-router-dom
</code></pre>
<h3 id="packagejson">package.json</h3>
<pre><code class="lang-json"> <span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;start&quot;</span>: <span class="hljs-string">&quot;react-app-rewired start&quot;</span>,
    <span class="hljs-string">&quot;build&quot;</span>: <span class="hljs-string">&quot;react-app-rewired build&quot;</span>,
    <span class="hljs-string">&quot;test&quot;</span>: <span class="hljs-string">&quot;react-app-rewired test&quot;</span>,
    <span class="hljs-string">&quot;eject&quot;</span>: <span class="hljs-string">&quot;react-app-rewired eject&quot;</span>
  },
</code></pre>
<h3 id="config-overridesjs">config-overrides.js</h3>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
  webpack: (config) =&gt; {
    config.output.library = <span class="hljs-string">&apos;reactApp&apos;</span>
    config.output.libraryTarget = <span class="hljs-string">&apos;umd&apos;</span>
    config.output.publicPath = <span class="hljs-string">&apos;http://localhost:20000/&apos;</span>
    <span class="hljs-keyword">return</span> config
  },
  devServer: (configFunction) =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">proxy, allowHost</span>) </span>{
      <span class="hljs-keyword">const</span> config = configFunction(proxy, allowHost)
      <span class="hljs-comment">// config.port = &apos;20000&apos;</span>
      config.headers = {
        <span class="hljs-string">&apos;Access-Control-Allow-Origin&apos;</span>: <span class="hljs-string">&apos;*&apos;</span>,
      }
      <span class="hljs-keyword">return</span> config
    }
  }
}
</code></pre>
<h3 id="env">.env</h3>
<pre><code class="lang-tex">PORT=20000
WDS_SOCKET_PORT=20000
SKIP_PREFLIGHT_CHECK=true
</code></pre>
<h3 id="srcindexjs">src/index.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-dom&apos;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&apos;./index.css&apos;</span>;
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./App&apos;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
  ReactDOM.render(
    &lt;React.StrictMode&gt;
      &lt;App /&gt;
    &lt;/React.StrictMode&gt;,
    document.getElementById(&apos;root&apos;)
  );
}

// if(window.__POWERED_BY_QIANKUN__) {
//   __webpack_public_path__ = window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;
// }

if(!window.__POWERED_BY_QIANKUN__) {
  render()
}

// &#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x534F;&#x8BAE;
export async function bootstrap(props){
  console.log(&apos;qiankun-react&#x542F;&#x52A8;&apos;);
}

export async function mount(props){
  render()
}

export async function unmount(props){
  ReactDOM.unmountComponentAtNode(document.getElementById(&apos;root&apos;))
}
</code></pre>
<p>src/App.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
<span class="hljs-keyword">import</span> logo <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./logo.svg&apos;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&apos;./App.css&apos;</span>;
<span class="hljs-keyword">import</span> { BrowserRouter, Route, Link } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-router-dom&apos;</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    &lt;BrowserRouter basename=&quot;/react&quot;&gt;
      &lt;Link to=&quot;/&quot;&gt;&#x9996;&#x9875;&lt;/Link&gt;
      &lt;Link to=&quot;/about&quot;&gt;&#x5173;&#x4E8E;&#x9875;&#x9762;&lt;/Link&gt;
      &lt;hr /&gt;
      &lt;Route path=&quot;/&quot; exact render={()=&gt;(
        &lt;div className=&quot;App&quot;&gt;
          &lt;header className=&quot;App-header&quot;&gt;
            &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;
            &lt;p&gt;
              Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.
            &lt;/p&gt;
            &lt;a
              className=&quot;App-link&quot;
              href=&quot;https://reactjs.org&quot;
              target=&quot;_blank&quot;
              rel=&quot;noopener noreferrer&quot;
            &gt;
              &lt;h1&gt;&#x8FD9;&#x662F;&#x9996;&#x9875;&lt;/h1&gt;
            &lt;/a&gt;
          &lt;/header&gt;
        &lt;/div&gt;
      )}&gt;
      &lt;/Route&gt;
      &lt;Route path=&quot;/about&quot; render={()=&gt;(&lt;h1&gt;about&#x9875;&#x9762;&lt;/h1&gt;)}&gt;&lt;/Route&gt;
    &lt;/BrowserRouter&gt;
  );
}

export default App;
</code></pre>
<h2 id="host">host</h2>
<pre><code class="lang-shell">npm install webpack webpack-cli webpack-dev-server html-webpack-plugin babel-loader @babel/core @babel/preset-env @babel/preset-react style-loader css-loader --save-dev

npm install react react-dom --save
</code></pre>
<h3 id="packagejson">package.json</h3>
<pre><code class="lang-json"><span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;build&quot;</span>: <span class="hljs-string">&quot;webpack&quot;</span>,
    <span class="hljs-string">&quot;start&quot;</span>: <span class="hljs-string">&quot;webpack serve&quot;</span>
  }
</code></pre>
<h3 id="webpackconfigjs">webpack.config.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">const</span>  path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>)
<span class="hljs-keyword">let</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;webpack&apos;</span>)
<span class="hljs-keyword">let</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;html-webpack-plugin&apos;</span>)
<span class="hljs-keyword">const</span> ModuleFederationPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;webpack/lib/container/ModuleFederationPlugin&apos;</span>)
<span class="hljs-built_in">module</span>.exports = {
  mode: <span class="hljs-string">&apos;development&apos;</span>,
  devtool: <span class="hljs-literal">false</span>,
  entry: <span class="hljs-string">&apos;./src/index.js&apos;</span>,
  output: {
    publicPath: <span class="hljs-string">&apos;http://localhost:8081/&apos;</span>,
  },
  devServer: {
    port: <span class="hljs-number">8081</span>
  },
  <span class="hljs-built_in">module</span>: {
    rules: [
      {
        test: <span class="hljs-regexp">/\.jsx?$/</span>,
        use: {
          loader: <span class="hljs-string">&apos;babel-loader&apos;</span>,
          options: {
            presets: [<span class="hljs-string">&apos;@babel/preset-react&apos;</span>,]
          },
        },
        exclude: <span class="hljs-regexp">/node_modules/</span>,
      }
    ]
  },
  plugins: [
    <span class="hljs-keyword">new</span> HtmlWebpackPlugin({
      template: <span class="hljs-string">&apos;./public/index.html&apos;</span>
    }),
    <span class="hljs-keyword">new</span> ModuleFederationPlugin({
      name: <span class="hljs-string">&quot;host&quot;</span>,
      remotes: {
        remote: <span class="hljs-string">&quot;remoteVar@http://localhost:8080/remoteEntry.js&quot;</span>,
      },
      shared: [<span class="hljs-string">&apos;react&apos;</span>, <span class="hljs-string">&apos;react-dom&apos;</span>]
    })
  ]
}
</code></pre>
<h3 id="rcindexjs">rc/index.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span>(<span class="hljs-string">&apos;./bootstrap&apos;</span>)
</code></pre>
<h3 id="srcbootstrapjs">src/bootstrap.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
<span class="hljs-keyword">import</span> ReactDom <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-dom&apos;</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./App&apos;</span>
ReactDom.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span>/&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;root&apos;</span>))
</code></pre>
<h3 id="rcappjs">rc/App.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
<span class="hljs-keyword">import</span> Slides <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./Slides&apos;</span>
<span class="hljs-comment">// import NewsList from &apos;./NewsList&apos;</span>
<span class="hljs-keyword">const</span> RemoteNewsList = React.lazy(()=&gt;<span class="hljs-keyword">import</span>(<span class="hljs-string">&apos;remote/NewsList&apos;</span>))
<span class="hljs-keyword">const</span> App = () =&gt; (
  &lt;div&gt;
    &lt;h3&gt;host&#x7EC4;&#x4EF6;Slides&lt;/h3&gt;
    &lt;Slides /&gt;
    &lt;hr/&gt;
    &lt;h3&gt;remote&#x7EC4;&#x4EF6;NewsList&lt;/h3&gt;
    &lt;React.Suspense fallback=&quot;Loading NewsList&quot;&gt;
      &lt;RemoteNewsList /&gt;
    &lt;/React.Suspense&gt;
  &lt;/div&gt;
)
export default App
</code></pre>
<h3 id="srcslidesjs">src/Slides.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
<span class="hljs-keyword">const</span> Slides = () =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    Slides
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Slides
</code></pre>
<h3 id="publicindexhtml">public/index.html</h3>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>host<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 id="remote">remote</h2>
<pre><code class="lang-shell">npm install webpack webpack-cli webpack-dev-server html-webpack-plugin babel-loader @babel/core @babel/preset-env @babel/preset-react style-loader css-loader --save-dev

npm install react react-dom --save
</code></pre>
<h3 id="packagejson">package.json</h3>
<pre><code class="lang-js"><span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;build&quot;</span>: <span class="hljs-string">&quot;webpack&quot;</span>,
    <span class="hljs-string">&quot;start&quot;</span>: <span class="hljs-string">&quot;webpack serve&quot;</span>
  },
</code></pre>
<h3 id="webpackconfigjs">webpack.config.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">const</span>  path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>)
<span class="hljs-keyword">let</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;webpack&apos;</span>)
<span class="hljs-keyword">let</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;html-webpack-plugin&apos;</span>)
<span class="hljs-keyword">const</span> ModuleFederationPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;webpack/lib/container/ModuleFederationPlugin&apos;</span>)
<span class="hljs-built_in">module</span>.exports = {
  mode: <span class="hljs-string">&apos;development&apos;</span>,
  devtool: <span class="hljs-literal">false</span>,
  entry: <span class="hljs-string">&apos;./src/index.js&apos;</span>,
  output: {
    publicPath: <span class="hljs-string">&apos;http://localhost:8080/&apos;</span>,
  },
  devServer: {
    port: <span class="hljs-number">8080</span>
  },
  <span class="hljs-built_in">module</span>: {
    rules: [
      {
        test: <span class="hljs-regexp">/\.jsx?$/</span>,
        use: {
          loader: <span class="hljs-string">&apos;babel-loader&apos;</span>,
          options: {
            presets: [<span class="hljs-string">&apos;@babel/preset-react&apos;</span>,]
          },
        },
        exclude: <span class="hljs-regexp">/node_modules/</span>,
      }
    ]
  },
  plugins: [
    <span class="hljs-keyword">new</span> HtmlWebpackPlugin({
      template: <span class="hljs-string">&apos;./public/index.html&apos;</span>
    }),
    <span class="hljs-keyword">new</span> ModuleFederationPlugin({
      name: <span class="hljs-string">&quot;remoteVar&quot;</span>, <span class="hljs-comment">// &#x5FC5;&#x4F20; &#x8F93;&#x51FA;&#x7684;&#x6A21;&#x5757;&#x540D;&#x3002;&#x8FDC;&#x7A0B;&#x5F15;&#x7528;&#x8DEF;&#x5F84;&#x4E3A; ${name}/${expose}</span>
      filename: <span class="hljs-string">&quot;remoteEntry.js&quot;</span>, <span class="hljs-comment">// &#x6784;&#x5EFA;&#x8F93;&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x540D;</span>
      exposes: { <span class="hljs-comment">// &#x88AB;&#x8FDC;&#x7A0B;&#x5F15;&#x7528;&#x65F6;&#x53EF;&#x66B4;&#x9732;&#x7684;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;&#x53CA;&#x5176;&#x522B;&#x540D;</span>
        <span class="hljs-string">&quot;./NewsList&quot;</span>: <span class="hljs-string">&quot;./src/NewsList&quot;</span>,
      },
      shared: [<span class="hljs-string">&apos;react&apos;</span>, <span class="hljs-string">&apos;react-dom&apos;</span>]
    }),
  ]
}
</code></pre>
<h3 id="rcindexjs">rc/index.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span>(<span class="hljs-string">&apos;./bootstrap&apos;</span>)
</code></pre>
<h3 id="srcbootstrapjs">src/bootstrap.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
<span class="hljs-keyword">import</span> ReactDom <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-dom&apos;</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./App&apos;</span>
ReactDom.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span>/&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;root&apos;</span>))
</code></pre>
<h3 id="srcappjs">Src/App.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
<span class="hljs-keyword">import</span> NewsList <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./NewsList&apos;</span>
<span class="hljs-keyword">const</span> App = () =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Remote&#x7EC4;&#x4EF6;NewsList<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">NewsList</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
)
export default App
</span></code></pre>
<h3 id="srcnewslistjs">Src/NewsList.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>
<span class="hljs-keyword">const</span> NewsList = () =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    NewsList
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> NewsList
</code></pre>
<h3 id="publicindexhtml">Public/index.html</h3>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>remote<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="readme.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: 工程化">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"微前端","level":"1.13.1","depth":2,"previous":{"title":"工程化","level":"1.13","depth":1,"path":"engineering/readme.md","ref":"./engineering/readme.md","articles":[{"title":"微前端","level":"1.13.1","depth":2,"path":"engineering/micro_frontend.md","ref":"./engineering/micro_frontend.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["livereload"],"styles":{"website":"styles/website.css","ebook":"styles/ebook.css","pdf":"styles/pdf.css","mobi":"styles/mobi.css","epub":"styles/epub.css"},"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"intro.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":">=2.0.0","description":"This is such a great book!"},"file":{"path":"engineering/micro_frontend.md","mtime":"2021-03-14T15:09:55.988Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-03-16T03:04:52.695Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

